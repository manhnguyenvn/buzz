var App=function(){var t=function(){var t=$("<div />");$(window).scroll(function(){var i=$("#header"),e=$(window).scrollTop();e>=100?i.addClass("mini"):i.removeClass("mini"),e>=150?$(t).is(":visible")||$(t).fadeIn(500):$(t).fadeOut(500)}),t.html('<i class="fa fa-chevron-up"></i>'),t.css({position:"fixed",bottom:"20px",right:"25px",width:"40px",height:"40px",color:"#eee","font-size":"","line-height":"40px","text-align":"center","background-color":"#222d32",cursor:"pointer","border-radius":"5px","z-index":"99999",opacity:".7",display:"none"}),t.on("mouseenter",function(){$(this).css("opacity","1")}),t.on("mouseout",function(){$(this).css("opacity",".7")}),$(".header").append(t),$(t).on("click",function(){$("html,body").animate({scrollTop:0},500)})},i=function(){$(".cats_link").mouseover(function(){$(this).addClass("active"),$(".sections").show(),e($(".scol1").find("a").first().attr("data-type"))}),$(".sections").mouseleave(function(){$(".cats_link").removeClass("active"),$(".sections").hide()}),$(".scol1").find("a").on("hover",function(){var t=$(this).attr("data-type");$(".scol2").find("ul").hide(),$("#cats_"+t).show()}),$(".biga").off("mouseover").mouseover(function(){var t=$(this).attr("data-type");$(this).hasClass("firsg")&&($(".scol2").find("ul").hide(),$("#cats_"+t).show()),e(t)}),$("#searchbutton").on("click",function(t){var i=($(this),$(".search_link")),e=$("#searchbox_text").val();i.hasClass("active")?e.length>1?location.href="/search?q="+e:e.focus:i.addClass("active")}),$("#searchclosebutton").on("click",function(t){$(".search_link").removeClass("active")}),$("#menu-toggler").on("click",function(t){var i=($(this),$("#colnav"));i.hasClass("active")?i.removeClass("active"):i.addClass("active")}),$(".popup-action").on("click",function(t){return a($(this).attr("href")),!1})},e=function(t){$.ajax({method:"GET",url:"/"+t+".json",cache:!0,dataType:"json",success:function(t){$("#catnews_last").html(""),$(t).slice(0,6).each(function(t,i){var e=i.title,a=i.slug,n=i.thumb;$('<a href="'+a+'" class="catHeadline"></a>').html('<img src="'+n+'"><h3>'+e+"</h3>").appendTo("#catnews_last")})}})},a=function(t){if(t>""){var i=600,e=400,a=screen.height/2-e/2,n=screen.width/2-i/2;return window.open(t,"sharer","top="+a+",left="+n+",toolbar=0,status=0,width="+i+",height="+e),!1}},n=function(){var t=$(".jscroll").attr("data-auto");$(".jscroll").jscroll({loadingHtml:'<i style="top:40%;position:relative;" class="fa fa-spinner fa-pulse"></i>',padding:20,autoTrigger:"false"==t?!1:!0,nextSelector:"a.page-next:last",callback:function(){n()}})},o=function(){$(".blocker.ci").remove();var t='<div class="jquery-modal blocker ci" style="top: 0px; right: 0px; bottom: 0px; left: 0px; width: 100%; height: 100%; position: fixed; z-index: 100000; opacity: 0.75; background: rgba(0, 0, 0, .75);text-align:center;font-size:60px;color:#fff;"><i style="top:40%;position:relative;" class="fa fa-spinner fa-pulse"></i></div>';$("body").append(t)},s=function(){$(".blocker.ci").remove()},r=function(){var t=$(".postable");t.off("click").on("click",function(){NProgress.set(.4);var t=$(this).attr("href"),i=$(this).attr("data-method"),e=$(this).attr("data-target"),a=($(this).attr("data-message"),$(this).attr("data-puttype")),n=$(this).attr("data-type"),o=$("#requesttoken").val();return $.ajax({method:i,data:"_token="+o,url:t,success:function(t){return t.error?(alert(t.message),!1):("prepend"==a?$("#"+e).prepend(t):"append"==a?$("#"+e).append(t):$("#"+e).html(t),"post-body"==e&&setTimeout(function(){$(".poll_main_color").each(function(t){$(this).css("width",$(this).attr("data-percent")+"%")})},500),"textform"==n||("imageform"==n?BuzzyEditor.initImageUpluad():"videoform"==n?BuzzyEditor.initVideoGet():"tweetform"==n?BuzzyEditor.initTweetGet():"facebookpostform"==n?BuzzyEditor.initFacebookPostGet():"instagramform"==n?BuzzyEditor.initInstagramGet():"soundcloudform"==n?BuzzyEditor.initSoundCloudGet():"questionform"==n||"resultform"==n?(BuzzyEditor.initImageUpluad(),r()):"answerform"==n&&(BuzzyEditor.initAssignSelect(),BuzzyEditor.initImageUpluad())),setTimeout(function(){App.initAjax(),n>""&&BuzzyEditor.EditorInit()},100),void NProgress.done(!0))}}),!1})},c=function(){$("#PostNewUser").on("click",function(){NProgress.set(.4),App.initLoadingCaption("show"),$("#auth-modal").hide();var t=$(this).closest("form");$.post(t.attr("action"),t.serialize(),function(t){t.errors?(swal(t.errors),$("#auth-modal").show()):swal({title:t.status,text:t.text,type:"success",timer:2e3,showConfirmButton:!1},function(){location.href=t.url}),App.initLoadingCaption("hide"),NProgress.set(1)},"json")})},l=function(){$("#PostUserLogin").on("click",function(){NProgress.set(.4),App.initLoadingCaption("show"),$("#auth-modal").hide();var t=$(this).closest("form"),i=t.attr("action"),e=t.serialize();$.post(i,e,function(t){t.errors?(swal(t.errors),$("#auth-modal").show()):location.href=t.url,App.initLoadingCaption("hide"),NProgress.set(1)},"json")})},u=function(){var t=$("#auth-modal");$('[rel="get:Signupform"]').click(function(){return t.find(".signup-form").length>0?(t.modal(),!1):($.ajax({method:"GET",url:$(this).attr("href"),success:function(i){t.html(i).modal(),c(),App.initAjax()}}),!1)})},d=function(){var t=$("#auth-modal");$('[rel="get:Loginform"]').click(function(){return t.find(".login-form").length>0?(t.modal(),!1):($.ajax({method:"GET",url:$(this).attr("href"),success:function(i){t.html(i).modal(),l(),App.initAjax()}}),!1)})},f=function(){var t=$(".quizquestion"),i=t.length,e=$("#quiz_result").attr("data-popup");$(".answer").find("a").click(function(){$(this).parents(".answer").find("a").removeClass("active").css("opacity","0.6"),$(this).css("opacity","1").addClass("active");var a=t.find("a.active"),n=a.length;if(n==i){$(".entry.results").show();var o=[];a.each(function(t){var i=$(this).attr("data-result");o.push(i)}),Array.prototype.mostFreq=function(){for(var t,i,e,a,n=this.concat(),o=0,s=n.length/2;n.length;){for(t=n.shift(),a=1;-1!=(i=n.indexOf(t));)n.splice(i,1),++a;if(a>s)return t;a>o&&(e=t,o=a)}return e};var s=$(".quiz_result");s.each(function(){if($(this).attr("data-order")==o.mostFreq()){$(".answer").find("a").unbind("click").addClass("closed");var t=$(this).attr("data-picture"),i=$(this).attr("data-description"),a=$(this).attr("data-name");$(this).find("img").attr("src",t),"off"==e?$("html,body").animate({scrollTop:$("#quiz_result").offset().top-160},500):(App.initLoadingCaption("show"),setTimeout(function(){p(t,i,a),h(),App.initLoadingCaption("hide")},300)),s.hide(),$(this).show().addClass("active")}})}else{if($(this).parents(".quizquestion").removeClass("selectableQuest"),$(this).parents(".quizquestion").next(".selectableQuest").length>0)var r=$(this).parents(".quizquestion").next(".selectableQuest").offset().top;else if($(this).parents(".quizquestion").prev(".selectableQuest").length>0)var r=$(this).parents(".quizquestion").prev(".selectableQuest").offset().top;$("html,body").animate({scrollTop:r-80},500)}return!1})},p=function(t,i,e){swal({customClass:"BuzzyQuizAlert",title:e,text:'<span class="resultdesc">'+i+'</span><div class="external-sign-in" style="margin-bottom:20px"><a style="width: 35%;margin: 10px;display: inline-block" href="javascript:" class="Facebook do-signup tgec postToResultFeed"><span>'+BuzzyQuizzes.lang_1+"</span><strong>"+BuzzyQuizzes.lang_3+'</strong></a><a  style="width: 35%;margin: 10px;display: inline-block" href="javascript:" class="Twitter do-signup tgec postToResultFeed"><span>'+BuzzyQuizzes.lang_2+"</span><strong>"+BuzzyQuizzes.lang_4+"</strong></a>",imageUrl:t,showCancelButton:!0,showConfirmButton:!1,allowOutsideClick:!0,cancelButtonText:"X",html:!0,showLoaderOnConfirm:!0},function(){})},h=function(){$(".postToFacebookFeed").off("click").on("click",function(t){var i=$(this),e=i.attr("data-link"),a=i.attr("data-iname"),n=i.attr("data-picture"),o=i.attr("data-description");return m(e,a,n,o),!1}),$(".postToResultFeed").off("click").on("click",function(t){var i=$(".quiz_result.active"),e=i.attr("data-link"),a=(i.attr("data-name"),i.attr("data-iname")),n=i.attr("data-itname"),o=i.attr("data-picture"),s=i.attr("data-description");return $(this).hasClass("Facebook")?m(e,a,o,s):$(this).hasClass("Pinterest")?v(e,a,o,s):g(e,n),!1})},m=function(t,i,e,a){return swal({title:"",timer:1}),FB.ui({method:"feed",link:t,name:i,picture:e,description:a},function(t){t&&!t.error_message&&swal({title:BuzzyQuizzes.lang_5,text:BuzzyQuizzes.lang_6,type:"success",timer:2e3,showConfirmButton:!1})}),!1},g=function(t,i){return a("https://twitter.com/intent/tweet?url="+t+"&text="+i),!1},v=function(t,i,e){return a("http://pinterest.com/pin/create/link/?url="+t+"&media="+e+"&description="+i),!1};return{init:function(){t(),r(),i(),n(),h(),this.initAjax()},initAjax:function(){u(),d(),r()},initLoadingCaption:function(t){"show"==t?o():s()},initLoginClicks:function(){l()},initRegisterClicks:function(){c()},initQuizzesClicks:function(){f()}}}();